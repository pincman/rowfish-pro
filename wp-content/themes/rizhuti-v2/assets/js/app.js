var body=jQuery("body"),st=0,lastSt=0,iconspin='<i class="fa fa-spinner fa-spin"></i> ',iconcheck='<i class="fa fa-check"></i> ',iconwarning='<i class="fa fa-warning "></i> ',is_qq_captcha_verify=!$("#TencentCaptcha").hasClass("TencentCaptcha")||!1;function rollbar(){"use strict";$(window).scroll(function(){$(this).scrollTop()>80?$(".rollbar").fadeIn():$(".rollbar").fadeOut()}),$("#back-to-top").click(function(){return $("html, body").animate({scrollTop:0},500),!1})}function singular_poster(){"use strict";$(".go-copy").on("click",function(){$(this);new ClipboardJS(".go-copy").on("success",function(e){rizhuti_v2_toast_msg("success",$(e.trigger).text()+" 复制成功"),e.clearSelection()})}),rizhutiv2.singular_id>0&&rizhuti_v2_ajax({action:"add_post_views_num",id:rizhutiv2.singular_id},function(){console.log("\n %c Theme By Rizhuti-v2 %c https://ritheme.com \n\n","color: #fff; background: #536de6; padding:5px 0;","background: #fadfa3; padding:5px 0;")},function(e){}),$(".go-star-btn").on("click",function(){var e=$(this);e.html();rizhuti_v2_ajax({action:"go_fav_post",post_id:e.data("id")},function(t){e.html(iconspin)},function(t){1==t.status&&(e.toggleClass("ok"),e.attr("disabled","true").html(t.msg))})}),$(".share-poster").on("click",function(){var e=$(this),t=e.html();e.html(iconspin+"生成中"),$.post(rizhutiv2.admin_url,{action:"get_poster_html",id:e.data("id")},function(a){Swal.fire({html:a,showConfirmButton:!1,width:380,padding:5,background:"#fff",showCloseButton:!0,onBeforeOpen:()=>{Swal.showLoading(),setTimeout(function(){html2canvas(document.getElementById("poster-html"),{scale:2,logging:!1,backgroundColor:"#fff",useCORS:!0}).then(function(e){Swal.hideLoading();var t=e.toDataURL("image/jpeg",.7),a='<a class="poster-down btn btn-primary" href="'+t+'" download="'+document.title+'.jpg">'+iconcheck+" 下载海报</a>";$(".poster-html").html('<div class="poster-canvas"><img src="'+t+'"></div>'+a)})},1e3)},onClose:()=>{e.html(t)}})})})}function singular_imgPreview(){"use strict";if($("iframe").css("min-height",.66*$("iframe").width()),is_weixin_view())return!1;jQuery(".article-content .entry-wrapper").on("click",".gallery-item",function(e){e.preventDefault();var t=[],a=jQuery(this),i=a.index();jQuery.each(a.siblings().addBack(),function(e,a){var i=jQuery(a).find("a").attr("href"),n=jQuery(a).find("img").attr("src"),o=jQuery(a).find("a").attr("alt")||jQuery(a).find(".gallery-caption").text();"#"!==i&&t.push({src:i,thumb:n,subHtml:o})}),a.lightGallery({dynamic:!0,dynamicEl:t,download:!1,share:!1}).data("lightGallery").index=i})}function navbar(){"use strict";st=jQuery(window).scrollTop();var e=jQuery(".site-header").height(),t=jQuery(".navbar-sticky");st>lastSt&&st>e?t.addClass("slide-now"):t.removeClass("slide-now"),lastSt=st}function offCanvas(){"use strict";var e=jQuery(".burger"),t=jQuery(".canvas-close");jQuery(".main-menu .nav-list").slicknav({label:"",prependTo:".mobile-menu"}),e.on("click",function(){body.toggleClass("canvas-opened"),body.addClass("canvas-visible"),dimmer("open","medium")}),t.on("click",function(){body.hasClass("canvas-opened")&&(body.removeClass("canvas-opened"),dimmer("close","medium"))}),jQuery(".dimmer").on("click",function(){body.hasClass("canvas-opened")&&(body.removeClass("canvas-opened"),dimmer("close","medium"))}),jQuery(document).keyup(function(e){27==e.keyCode&&body.hasClass("canvas-opened")&&(body.removeClass("canvas-opened"),dimmer("close","medium"))})}function search(){"use strict";$("body").on("click","[data-action]",function(e){e.preventDefault();var t=$(this),a=t.data("action"),i=t.data("target"),n=getScrollbarWidth();switch(a){case"omnisearch-open":i=t.data("target"),t.addClass("active"),$(i).addClass("show"),$(i).find(".form-control").focus(),$("body").addClass("omnisearch-open").append('<div class="mask-body mask-body-dark" data-action="omnisearch-close" data-target="'+i+'" />'),$("body").css("padding-right",n+"px");break;case"omnisearch-close":i=t.data("target"),$('[data-action="search-open"]').removeClass("active"),$(i).removeClass("show"),$("body").removeClass("omnisearch-open").find(".mask-body").remove(),$("body").css("padding-right","0px")}})}function toggleDark(){"use strict";jQuery(".toggle-dark").on("click",function(){var e=$(this),t=e.html();rizhuti_v2_ajax({action:"toggle_dark",dark:!0===body.hasClass("dark-open")?"0":"1"},function(t){e.html(iconspin)},function(e){},function(a){body.toggleClass("dark-open"),e.html(t)})})}function dimmer(e,t){"use strict";var a=jQuery(".dimmer");switch(e){case"open":a.fadeIn(t);break;case"close":a.fadeOut(t)}}function megaMenu(){"use strict";jQuery(".menu-posts").not(".owl-loaded").owlCarousel({items:6,margin:15,dots:!0,nav:!1})}function hero(){"use strict"}function sidebar(){"use strict";if($(window).width()<992)$(".widget-area .rizhuti_v2-widget-shop-down").insertAfter($("#header-widget-shop-down p"));else{jQuery(".container .sidebar-column").theiaStickySidebar({additionalMarginTop:30}),jQuery(".container .content-column").theiaStickySidebar({additionalMarginTop:30})}}function slider_carousel(){"use strict";var e={autoplay:!0,autoplaySpeed:800,loop:!0},t=jQuery(".slider.img-center.module"),a={dots:!0,items:1,nav:!0,navText:['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>'],navElement:"div"};t.each(function(t,i){if(jQuery(i).hasClass("autoplay")){var n=Object.assign(e,a);jQuery(i).owlCarousel(n)}else jQuery(i).owlCarousel(a)});var i=jQuery(".slider.big.module"),n={dots:!0,items:1,nav:!0,navText:['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>'],navElement:"div"};i.each(function(t,a){if(jQuery(a).hasClass("autoplay")){var i=Object.assign(e,n);jQuery(a).owlCarousel(i)}else jQuery(a).owlCarousel(n)});var o=jQuery(".slider.center.module"),s={center:!0,dotsSpeed:800,dots:!0,loop:!0,margin:0,nav:!0,navText:['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>'],navElement:"div",responsive:{0:{items:1},768:{items:2}}};o.each(function(t,a){if(jQuery(a).hasClass("autoplay")){var i=Object.assign(e,s);jQuery(a).owlCarousel(i)}else jQuery(a).owlCarousel(s)});var r=jQuery(".slider.thumbnail.module"),c={dotsData:!0,dotsSpeed:800,items:1};r.each(function(t,a){if(jQuery(a).hasClass("autoplay")){var i=Object.assign(e,c);jQuery(a).owlCarousel(i)}else jQuery(a).owlCarousel(c)});var l=jQuery(".carousel.module"),u={autoHeight:!0,dots:!1,margin:30,nav:!0,navSpeed:500,navText:['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>'],navElement:"div",responsive:{0:{items:1},768:{items:3},992:{items:4}}};body.hasClass("wide-screen")&&(u.margin=20,u.responsive={0:{items:1},768:{items:3},992:{items:4},1200:{items:5}}),l.each(function(t,a){if(jQuery(a).hasClass("autoplay")){var i=Object.assign(e,u);jQuery(a).owlCarousel(i)}else jQuery(a).owlCarousel(u)});var d=jQuery(".catbox-carousel.module"),m={autoHeight:!0,dots:!1,margin:20,nav:!0,navSpeed:500,navText:['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>'],navElement:"div",responsive:{0:{items:2},768:{items:4},992:{items:5}}};d.each(function(t,a){if(jQuery(a).hasClass("autoplay")){var i=Object.assign(e,m);jQuery(a).owlCarousel(i)}else jQuery(a).owlCarousel(m)})}function pagination(){"use strict";var e=jQuery(".posts-wrapper.scroll"),t=jQuery(".infinite-scroll-button"),a={append:".posts-wrapper.scroll > *",debug:!1,hideNav:".pagination",history:!1,path:".pagination a.next",prefill:!0,status:".infinite-scroll-status"};body.hasClass("pagination-infinite_button")&&(a.button=".infinite-scroll-button",a.prefill=!1,a.scrollThreshold=!1,e.on("request.infiniteScroll",function(e,a){t.html(iconspin+rizhutiv2.infinite_loading)}),e.on("load.infiniteScroll",function(e,a,i){t.text(rizhutiv2.infinite_load)})),(body.hasClass("pagination-infinite_button")||body.hasClass("pagination-infinite_scroll"))&&body.hasClass("paged-next")&&e.infiniteScroll(a)}function is_weixin_view(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}function weixin_imgPreview(){if(is_weixin_view()){for(var e=[],t=$(".article-content .entry-wrapper img"),a="",i="",n=0;n<t.length;n++)a=t.eq(n).attr("data-src"),i=t[n].src,e[n]=a||i;t.on("click",function(){var t=$(this).attr("data-src"),a=$(this).attr("src");WeixinJSBridge.invoke("imagePreview",{urls:e,current:t||a})})}}function theme_click(){"use strict";$(document).on("click",".go-send-email-code",function(e){var t=$(this),a=t.text(),i=$("input[name='user_email']").val();t.html(iconspin+a),t.attr("disabled","true"),is_check_mail(i)?is_qq_captcha_verify?rizhuti_v2_ajax({action:"send_email_verify_code",user_email:i},null,function(e){1==e.status?rizhuti_v2_toast_msg("success","发送成功",function(){$("input[name='email_verify_code']").removeAttr("disabled")}):rizhuti_v2_toast_msg("info",e.msg,function(){t.removeAttr("disabled")})},function(e){t.html(a)}):rizhuti_v2_toast_msg("info","请点击验证按钮进行验证",function(){t.removeAttr("disabled"),t.html(a)}):rizhuti_v2_toast_msg("info","邮箱错误",function(){t.removeAttr("disabled"),t.html(a)})}),$(document).on("click",".go-bind-email",function(e){e.preventDefault();var t=$(this),a=t.text(),i=$("input[name='user_email']").val(),n=$("input[name='email_verify_code']").val();t.html(iconspin+a),t.attr("disabled","true"),is_qq_captcha_verify?rizhuti_v2_ajax({action:"user_bind_email",email_verify_code:n,user_email:i},null,function(e){1==e.status?rizhuti_v2_toast_msg("success",e.msg,function(){location.reload()}):rizhuti_v2_toast_msg("info",e.msg,function(){t.html(a),t.removeAttr("disabled")})}):rizhuti_v2_toast_msg("info","请点击验证按钮进行验证",function(){t.removeAttr("disabled"),t.html(a)})}),$(".mpweixin").on("click",function(e){e.preventDefault();$(this);rizhuti_v2_ajax({action:"get_mpweixin_qr"},function(e){Swal.showLoading()},function(e){if(1==rizhutiv2.jquey&&1==e.status){display_pay_qr('<p class="pt-4 m-0 text-success"><i class="fa fa-weixin"></i> 请使用微信扫码登录</p><img class="pl-4 pr-4" src="'+e.ticket_img+'"><p class="small">关注公众号即可登录</br>二维码有效期3分钟</p>');var t=setInterval(function(){rizhuti_v2_ajax({action:"check_mpweixin_qr",scene_id:e.scene_id},null,function(e){1==e.status?(clearInterval(t),rizhuti_v2_toast_msg("success",e.msg,function(){location.reload()})):""!==e.msg&&(clearInterval(t),rizhuti_v2_toast_msg("info",e.msg))})},3e3)}else rizhuti_v2_toast_msg("info",e.ticket_img)},function(e){Swal.hideLoading()})})}function shop_widget(){"use strict";$(".custom-radio label").on("click",function(){var e=$(".pricing-options li p"),t=$(".price h3"),a=$(this);a.parents("li").find("input").attr("checked")||a.parents("li").find("input").attr("disabled")||(e.slideUp(200),a.parents("li").find("p").slideDown(200),t.html(a.data("price")),a.parents("ul").find("input").removeAttr("checked"),a.parents("li").find("input").attr("checked","checked"))})}function post_pay(){"use strict";$(".click-pay-post").on("click",function(){var e=$(this);select_pay_mode({action:"go_post_pay",post_id:e.data("postid"),pay_type:1,pay_price:e.data("price"),nonce:e.data("nonce")})})}function reload_this_href(){$.ajax({url:window.location.href,data:{},dataType:"html",async:!0,cache:!1,success:function(){location.reload()},error:function(){location.reload()}})}function select_pay_mode(e){Swal.fire({title:"",html:rizhutiv2.pay_type_html.html,showConfirmButton:!1,width:300,padding:10,showCloseButton:!0,onBeforeOpen:()=>{const t=Swal.getContent(),a=t.querySelector.bind(t),i=a("#alipay"),n=a("#weixinpay"),o=a("#iconpay");i&&i.addEventListener("click",()=>{e.pay_type=rizhutiv2.pay_type_html.alipay,to_pay_data(e)}),n&&n.addEventListener("click",()=>{e.pay_type=rizhutiv2.pay_type_html.weixinpay,to_pay_data(e)}),o&&o.addEventListener("click",()=>{e.pay_type=rizhutiv2.pay_type_html.iconpay,to_pay_data(e)})},onClose:()=>{}})}function check_pay_status(e,t){var a=setInterval(function(){rizhuti_v2_ajax({action:"check_pay",num:t,post_id:e},null,function(e){1==e.status&&(clearInterval(a),Cookies.remove("current_pay_ordernum"),rizhuti_v2_toast_msg("success",e.msg,function(){reload_this_href()}))})},2e3)}function to_pay_data(e){rizhuti_v2_ajax(e,function(e){Swal.showLoading()},function(t){1==t.status?2==t.type?(Cookies.set("current_pay_ordernum",t.num),window.location.href=t.msg):3==t.type?"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",function(){onBridgeReady(t.msg)},!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",function(){onBridgeReady(t.msg)}),document.attachEvent("onWeixinJSBridgeReady",function(){onBridgeReady(t.msg)})):onBridgeReady(t.msg):4==t.type?(Swal.showLoading(),Cookies.remove("current_pay_ordernum"),rizhuti_v2_toast_msg("success",t.msg,function(){reload_this_href()})):(display_pay_qr(t.msg),check_pay_status(e.post_id,t.num)):Swal.fire("",t.msg,"info")},function(e){Swal.hideLoading()})}function display_pay_qr(e){Swal.fire({html:e,showConfirmButton:!1,width:300,padding:"0",background:"#fff",allowOutsideClick:!1,showCloseButton:!0,timer:1e5,timerProgressBar:!0,onClose:()=>{setTimeout(function(){location.reload()},2e3)}})}function onBridgeReady(e){WeixinJSBridge.invoke("getBrandWCPayRequest",JSON.parse(e),function(e){"get_brand_wcpay_request:ok"===e.err_msg?rizhuti_v2_toast_msg("success","支付成功",function(){reload_this_href()}):rizhuti_v2_toast_msg("info","取消支付",function(){location.reload()})})}function qq_aptcha_callback(e){if(0===e.ret){var t=$("#TencentCaptcha");rizhuti_v2_ajax({action:"qq_captcha_verify",Ticket:e.ticket,Randstr:e.randstr},function(e){t.html(iconspin+"&nbsp;验证中"),t.attr("disabled","disabled")},function(e){1==e.response?(t.css({"background-color":"#8bc34a",color:"#fff"}),t.html(iconcheck+"&nbsp;验证通过"),t.attr("disabled","disabled"),is_qq_captcha_verify=!0):(t.html(iconwarning+"&nbsp;验证失败"),t.attr("disabled","disabled"))})}}function rizhuti_v2_ajax(e,t,a,i){a=a||function(e){console.log(e)},t=t||function(e){},i=i||function(e){};$.ajax({url:rizhutiv2.admin_url,data:e,type:"post",dataType:"json",async:!0,success:a,error:function(e){rizhuti_v2_toast_msg("info",e.responseText)},beforeSend:t,complete:i})}function rizhuti_v2_toast_msg(e,t,a){var i=a||function(e){};Swal.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,onOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:e,title:t,onClose:i})}function is_check_name(e){return/^[\w]{3,16}$/.test(e)}function is_check_mail(e){return/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/.test(e)}function getScrollbarWidth(){var e,t,a=document.createElement("div"),i={width:"100px",height:"100px",overflowY:"scroll"};for(e in i)a.style[e]=i[e];return document.body.appendChild(a),t=a.offsetWidth-a.clientWidth,a.remove(),t}jQuery(function(){"use strict";offCanvas(),toggleDark(),search(),megaMenu(),hero(),pagination(),sidebar(),slider_carousel(),shop_widget(),post_pay(),theme_click(),weixin_imgPreview(),singular_imgPreview(),singular_poster(),rollbar()}),$(".selectpicker").selectpicker("setStyle","btn-white"),jQuery(window).scroll(function(){"use strict";body.hasClass("navbar-sticky")&&window.requestAnimationFrame(navbar)}),document.addEventListener("lazyloaded",function(e){var t={disableParallax:/iPad|iPhone|iPod|Android/,disableVideo:/iPad|iPhone|iPod|Android/,speed:.1};(jQuery(e.target).parents(".hero").length||jQuery(e.target).hasClass("hero"))&&jQuery(e.target).jarallax(t),jQuery(e.target).parent().hasClass("module")&&jQuery(e.target).parent().hasClass("parallax")&&jQuery(e.target).parent().jarallax(t),jQuery(e.target).hasClass("jarallax-sarch")&&jQuery(e.target).jarallax(t)}),jQuery(function(){Cookies.get("current_pay_ordernum")&&Swal.fire({title:"您有订单正在支付中",text:"您有订单正在进行支付，如已经支付完成，点击完成刷新页面即可",icon:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"支付完成",cancelButtonText:"取消支付"}).then(e=>{Cookies.remove("current_pay_ordernum"),location.reload()})}),jQuery(document).ready(function(e){e("#cancel-comment-reply-link").text();var t="comments-list";e(document).on("submit","#commentform",function(a){return a.preventDefault(),e.ajax({url:rizhutiv2.admin_url,data:e(this).serialize()+"&action=ajax_comment",type:e(this).attr("method"),beforeSend:faAjax.createButterbar("提交中...."),error:function(e){faAjax.createButterbar(e.responseText)},success:function(a){e("textarea").each(function(){this.value=""});var i=faAjax,n=i.I("cancel-comment-reply-link"),o=i.I("wp-temp-form-div"),s=i.I(i.respondId);i.I("comment_post_ID").value;"0"!=i.I("comment_parent").value?e("#respond").before('<ul class="comment-children">'+a+"</ul>"):e("."+t).length?"asc"==rizhutiv2.comment_list_order?e("."+t).append(a):e("."+t).prepend(a):e("#respond").after('<ul class="'+t+'">'+a+"</ul>"),i.createButterbar("提交成功"),n.style.display="none",n.onclick=null,i.I("comment_parent").value="0",o&&s&&(o.parentNode.insertBefore(s,o),o.parentNode.removeChild(o))}}),!1}),faAjax={I:function(e){return document.getElementById(e)},clearButterbar:function(t){e(".butterBar").length>0&&e(".butterBar").remove()},createButterbar:function(t){this.clearButterbar(),e("#commentform").append('<div class="butterBar"><p class="butterBar-message">'+t+"</p></div>"),setTimeout("jQuery('.butterBar').remove()",3e3)}}});