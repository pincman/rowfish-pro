(function(e){var t,i,n,a,l,o=0;e.fn.do_rename=function(){var a=this;e.post(ajaxurl,{action:"phoenix_media_rename",type:n,_wpnonce:e("input[name=_mr_wp_nonce]",t).val(),new_filename:e("input",a).val(),post_id:e("input",a).data("post-id")},function(n){e(".loader",a).hide(),1!=n?e(".error",a).text(n).css("display","inline-block"):(e("input[type=text]",a).attr("title",e("input[type=text]",a).val()),e(".success",a).css("display","inline-block")),++o==l?(o=0,t.find(".error:visible").length||t.submit(),e("#doaction").prop("disabled",!1)):i.eq(o).do_rename()})},e(document).ready(function(){t=e("#post"),a=e(".wp_attachment_image").length,a||e(".tablenav select[name^=action]").each(function(){for(label in MRSettings.labels)e("option:last",this).before(e("<option>").attr("value",label).text(decodeURIComponent(MRSettings.labels[label].replace(/\+/g,"%20"))))}),e("#post").submit(s),e(".tablenav .button.action").click(s)});var s=function(){if(n=e(this).siblings("select").length?e(this).siblings("select").val():"rename",a||"rename"==n||"rename_retitle"==n||"retitle"==n||"retitle_from_post_title"==n||"rename_from_post_title"==n||"rename_retitle_from_post_title"==n)return e("#doaction").prop("disabled",!0),t=e("#posts-filter"),a?(t=e("#post"),i=e(".phoenix-media-rename",t),i=i.filter(function(){return e("input[type=text]",this).val()!=e("input[type=text]",this).attr("title")})):(t=e("#posts-filter"),i=e("#the-list input:checked",t).closest("tr").find(".phoenix-media-rename")),(l=i.length)?(i.find(".loader, .error, .success").hide(),i.find(".loader").css("display","inline-block"),i.eq(o).do_rename(),!1):void 0}})(jQuery);